<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</title>
    <meta name="description" content="–£–¥–æ–±–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π —É –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.">
    <meta name="keywords" content="–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π, fillet calculator, –¥–∏–∑–∞–π–Ω, UI, geometry, web development, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã">
    <meta name="author" content="@kototjom">
    
    <!-- üì± OpenGraph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤">
    <meta property="og:description" content="–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è —É –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.">
    <meta property="og:url" content="https://calc.kototjom.top/">
    <meta property="og:image" content="https://calc.kototjom.top/preview.png">

    <!-- üê¶ Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤">
    <meta name="twitter:description" content="–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è —É –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.">
    <meta name="twitter:image" content="https://calc.kototjom.top/preview.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #5379f7; 
            --secondary-color: #28a745; 
            --danger-color: #ef4444; 
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; 
            color: #1f2937; 
        }
        .content-section {
            padding: 1rem 0;
            max-width: 800px;
            margin: 0 auto;
        }

        /* –û–±–ª–∞—Å—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ */
        .drawing-area {
            position: relative;
            background-color: #f5f5f5;
            border-radius: 1.5rem;
            overflow: hidden;
            width: 100%;
            min-height: 300px; 
            border: 1px solid #ccc;
            transition: border-color 0.3s ease;
            display: flex;
            flex-grow: 1; 
        }
        
        .drawing-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .box {
            position: absolute;
            box-sizing: border-box;
            background: rgba(83, 121, 247, 0.1);
            border: 2px solid;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .outer-box { border-color: #5379f7; }
        .inner-box { border-color: #28a745; }
        
        .circle {
            position: absolute;
            border: 2px dashed;
            border-radius: 50%;
            background: transparent;
            z-index: 15;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .outer-circle { border-color: #5379f7; }
        .inner-circle { border-color: #28a745; }
        
        .is-invalid { border-color: #ef4444 !important; }
        .is-invalid-result { border-color: #ef4444 !important; }

        .validation-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ef4444; 
            font-weight: 600;
            font-size: 1.2rem;
            text-align: center;
            width: 80%; 
        }
        
        .mode-button.active {
            background-color: #5379f7;
            color: white;
            border-color: #5379f7;
        }

        /* –õ–µ—Ç–∞—é—â–∞—è –ø–ª–∞—à–∫–∞ */
        #floatingWarning {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            right: 1rem;
            z-index: 30;
            display: none;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: rgba(255, 251, 235, 0.95);
            backdrop-filter: blur(4px);
            border: 1px solid #fcd34d;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .drawing-area {
                height: 350px; 
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 p-4 md:p-8">

    <main class="container mx-auto max-w-7xl w-full">
        
        <div class="container mx-auto flex flex-col md:flex-row md:gap-8 max-w-7xl w-full items-stretch">
            
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö -->
            <div id="inputSide" class="flex flex-col gap-6 w-full md:w-1/2 bg-white rounded-2xl p-6 border border-gray-300 shadow-sm">
                <h1 lang="ru" class="text-2xl font-bold tracking-tight">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</h1>
                
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ -->
                <div class="flex p-1 bg-gray-100 rounded-xl">
                    <button id="modeInner" class="mode-button active flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all border border-transparent">
                        –°—á–∏—Ç–∞—é –≤–Ω–µ—à–Ω–∏–π
                    </button>
                    <button id="modeOuter" class="mode-button flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all border border-transparent">
                        –°—á–∏—Ç–∞—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π
                    </button>
                </div>

                <p id="modeDescription" class="text-gray-600 text-sm leading-relaxed">–ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –±–ª–æ–∫–æ–≤ –∏ —Ä–∞–¥–∏—É—Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∂–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤–Ω–µ—à–Ω–µ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.</p>
                
                <div class="grid grid-cols-2 gap-5">
                    <div class="input-group flex flex-col gap-1.5">
                        <label for="outerSize" class="text-sm font-semibold text-gray-700">–í–Ω–µ—à–Ω–∏–π –±–ª–æ–∫ (px)</label>
                        <input type="number" id="outerSize" value="420" min="1" class="bg-gray-50 rounded-xl p-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
                    </div>
                    <div class="input-group flex flex-col gap-1.5">
                        <label for="innerSize" class="text-sm font-semibold text-gray-700">–í–ª–æ–∂–µ–Ω–Ω—ã–π –±–ª–æ–∫ (px)</label>
                        <input type="number" id="innerSize" value="320" min="1" class="bg-gray-50 rounded-xl p-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-5">
                    <div class="input-group flex flex-col gap-1.5">
                        <label id="inputRadiusLabel" for="inputRadius" class="text-sm font-semibold text-gray-700">–†–∞–¥–∏—É—Å –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ (px)</label>
                        <input type="number" id="inputRadius" value="30" min="0" class="bg-gray-50 rounded-xl p-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
                    </div>
                    <div class="input-group flex flex-col gap-1.5">
                        <label id="resultRadiusLabel" for="resultRadius" class="text-sm font-semibold text-blue-700">–ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞–¥–∏—É—Å –≤–Ω–µ—à–Ω–µ–≥–æ</label>
                        <input type="text" id="resultRadius" readonly class="bg-blue-50 font-bold text-blue-700 rounded-xl p-3 border border-blue-200 transition-colors">
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
            <div class="flex flex-col w-full mt-6 md:mt-0 md:w-1/2">
                <div id="drawingArea" class="drawing-area">
                    <!-- –õ–µ—Ç–∞—é—â–∞—è –ø–ª–∞—à–∫–∞-–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ -->
                    <div id="floatingWarning">
                        <div class="flex items-center gap-2 text-amber-900">
                            <svg class="w-4 h-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                            <span class="text-[11px] leading-tight font-medium">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ—Ç–æ—á–µ–Ω –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö</span>
                        </div>
                        <button id="closeWarning" class="ml-4 text-amber-900 hover:bg-amber-200 p-1 rounded-md transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>

                    <div id="drawingCanvas" class="drawing-canvas">
                        <div id="validationMessage" class="validation-message" style="display:none;"></div>
                        <div id="outerBox" class="box outer-box absolute"></div>
                        <div id="innerBox" class="box inner-box absolute"></div>
                        <div id="outerCircle" class="circle outer-circle"></div>
                        <div id="innerCircle" class="circle inner-circle"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="content-section mt-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">–î–ª—è —á–µ–≥–æ —ç—Ç–æ –Ω—É–∂–Ω–æ?</h2>
            <p class="text-lg leading-relaxed text-gray-700 mb-8">
                –≠—Ç–æ –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –í –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º –¥–∏–∑–∞–π–Ω–µ ‚Äî –±—É–¥—å —Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (UI), –ø–æ–ª–∏–≥—Ä–∞—Ñ–∏—è –∏–ª–∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª–æ: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–±—â–∏–π —Ü–µ–Ω—Ç—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è. –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–∞–¥–∏—É—Å –≤–Ω–µ—à–Ω–µ–º—É –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –±–ª–æ–∫—É, –≤–∏–∑—É–∞–ª—å–Ω–æ –æ–Ω–∏ –±—É–¥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å: –ª–∏–Ω–∏–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –±—ã—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏, –∞ —É–≥–ª—ã –±—É–¥—É—Ç –∫–∞–∑–∞—Ç—å—Å—è ¬´—Ä–∞–∑–¥—É—Ç—ã–º–∏¬ª –∏–ª–∏ –∫—Ä–∏–≤—ã–º–∏.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">–ù–µ–º–Ω–æ–≥–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏</h2>
            <p class="text-lg leading-relaxed text-gray-700 mb-8">
                –î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≥–∞—Ä–º–æ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å–∫—Ä—É–≥–ª–µ–Ω–∏–π: —Ü–µ–Ω—Ç—Ä—ã –¥—É–≥ –æ–±–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å. –í –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è —ç—Ç–æ–≥–æ. –ß—Ç–æ–±—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏ –≤–Ω–µ—à–Ω–∏–π —Ä–∞–¥–∏—É—Å—ã –∏–º–µ–ª–∏ –æ–±—â–∏–π —Ü–µ–Ω—Ç—Ä —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è, –≤–Ω–µ—à–Ω–∏–π —Ä–∞–¥–∏—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–≤–µ–Ω —Å—É–º–º–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–∞–¥–∏—É—Å–∞ –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å—Ç–µ–Ω–∫–∞–º–∏, –¥–µ–ª—ë–Ω–Ω–æ–º—É –Ω–∞ –¥–≤–∞:
            </p>

            <div class="bg-blue-50 p-6 rounded-2xl text-center mb-8 border border-blue-100 shadow-inner">
                <p class="text-xl font-mono text-blue-700 font-bold">
                    –í–Ω–µ—à–Ω–∏–π —Ä–∞–¥–∏—É—Å = –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–∞–¥–∏—É—Å + (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏ √∑ 2)
                </p>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h2>
            <ul class="list-disc pl-5 space-y-3 text-lg text-gray-700">
                <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:</strong> –í—ã –º–æ–∂–µ—Ç–µ –≤—ã—á–∏—Å–ª–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π —Ä–∞–¥–∏—É—Å, –∑–Ω–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π, –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.</li>
                <li><strong>–£–∫–∞–∂–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã:</strong> –í–≤–µ–¥–∏—Ç–µ —à–∏—Ä–∏–Ω—É –≤–Ω–µ—à–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.</li>
                <li><strong>–ó–∞–¥–∞–π—Ç–µ —Ä–∞–¥–∏—É—Å:</strong> –í–ø–∏—à–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –∏–∑–≤–µ—Å—Ç–µ–Ω.</li>
                <li><strong>–ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ç–æ–≥–æ–≤–æ–µ —á–∏—Å–ª–æ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –±–ª–æ–∫–∞ –≤ –≤–∞—à–µ–º CSS –∏–ª–∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.</li>
            </ul>
        </div>

        <div class="mt-12 pt-6 border-t text-center text-gray-500 text-sm">
            <p><a href="/–ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å/" class="hover:underline">–í–∞—à–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å.</a> ¬© <span id="current-year"></span> <a href="https://kototjom.top" class="hover:underline">Kototjom</a></p>
        </div>

    </main>

<script>
document.getElementById("current-year").textContent = new Date().getFullYear();
const innerSizeInput = document.getElementById('innerSize');
const inputRadiusInput = document.getElementById('inputRadius');
const outerSizeInput = document.getElementById('outerSize');
const resultRadiusInput = document.getElementById('resultRadius');

const modeInnerBtn = document.getElementById('modeInner');
const modeOuterBtn = document.getElementById('modeOuter');
const modeDescription = document.getElementById('modeDescription');
const inputRadiusLabel = document.getElementById('inputRadiusLabel');
const resultRadiusLabel = document.getElementById('resultRadiusLabel');

const floatingWarning = document.getElementById('floatingWarning');
const closeWarningBtn = document.getElementById('closeWarning');

const drawingArea = document.getElementById('drawingArea');
const outerBox = document.getElementById('outerBox');
const innerBox = document.getElementById('innerBox');
const outerCircle = document.getElementById('outerCircle');
const innerCircle = document.getElementById('innerCircle');
const validationMessage = document.getElementById('validationMessage');

let calculationMode = 'calcOuter'; 
let warningDismissed = sessionStorage.getItem('warning_dismissed') === 'true';

const previewElements = [innerBox, outerBox, outerCircle, innerCircle];

modeInnerBtn.addEventListener('click', () => setMode('calcOuter'));
modeOuterBtn.addEventListener('click', () => setMode('calcInner'));

closeWarningBtn.addEventListener('click', () => {
    floatingWarning.style.display = 'none';
    sessionStorage.setItem('warning_dismissed', 'true');
    warningDismissed = true;
});

function setMode(mode) {
    if (calculationMode === mode) return;
    const currentResult = parseFloat(resultRadiusInput.value);
    if (!isNaN(currentResult) && currentResult >= 0) {
        inputRadiusInput.value = Math.round(currentResult);
    }
    calculationMode = mode;
    if (mode === 'calcOuter') {
        modeInnerBtn.classList.add('active');
        modeOuterBtn.classList.remove('active');
        modeDescription.textContent = "–ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –±–ª–æ–∫–æ–≤ –∏ —Ä–∞–¥–∏—É—Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∂–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤–Ω–µ—à–Ω–µ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.";
        inputRadiusLabel.textContent = "–†–∞–¥–∏—É—Å –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ (px)";
        resultRadiusLabel.textContent = "–ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞–¥–∏—É—Å –≤–Ω–µ—à–Ω–µ–≥–æ";
    } else {
        modeOuterBtn.classList.add('active');
        modeInnerBtn.classList.remove('active');
        modeDescription.textContent = "–ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –±–ª–æ–∫–æ–≤ –∏ —Ä–∞–¥–∏—É—Å –≤–Ω–µ—à–Ω–µ–π –æ–±–æ–ª–æ—á–∫–∏ ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∂–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É.";
        inputRadiusLabel.textContent = "–†–∞–¥–∏—É—Å –≤–Ω–µ—à–Ω–µ–≥–æ (px)";
        resultRadiusLabel.textContent = "–ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞–¥–∏—É—Å –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ";
    }
    updateVisualsAndCalculation();
}

[innerSizeInput, inputRadiusInput, outerSizeInput].forEach(input => {
    input.addEventListener('input', updateVisualsAndCalculation);
});

function updateVisualsAndCalculation() {
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ—à–∏–±–æ–∫
    [innerSizeInput, inputRadiusInput, outerSizeInput].forEach(el => el.classList.remove('input-error'));
    resultRadiusInput.value = ''; 
    validationMessage.style.display = 'none'; 
    floatingWarning.style.display = 'none';

    const outerSize = parseFloat(outerSizeInput.value);
    const innerSize = parseFloat(innerSizeInput.value);
    const inputRadius = parseFloat(inputRadiusInput.value);

    let hasFatalError = false;

    // 1. –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —á–∏—Å–ª–∞
    if (isNaN(outerSize) || outerSize <= 0) { outerSizeInput.classList.add('input-error'); hasFatalError = true; }
    if (isNaN(innerSize) || innerSize <= 0) { innerSizeInput.classList.add('input-error'); hasFatalError = true; }
    if (isNaN(inputRadius) || inputRadius < 0) { inputRadiusInput.classList.add('input-error'); hasFatalError = true; }

    if (hasFatalError) { handleInvalidState('–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'); return; }

    // 2. –õ–æ–≥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
    if (innerSize >= outerSize) { 
        innerSizeInput.classList.add('input-error'); 
        outerSizeInput.classList.add('input-error'); 
        handleInvalidState('–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
        return; 
    }

    const distance = (outerSize - innerSize) / 2;
    let finalInnerRadius, finalOuterRadius;

    if (calculationMode === 'calcOuter') {
        finalInnerRadius = inputRadius;
        finalOuterRadius = inputRadius + distance;
    } else {
        finalOuterRadius = inputRadius;
        finalInnerRadius = Math.max(0, inputRadius - distance);
    }

    // 3. –ü—Ä—è—á–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –µ—Å–ª–∏ —Ä–∞–¥–∏—É—Å –±–æ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã —Å—Ç–æ—Ä–æ–Ω—ã (–≥–µ–æ–º–µ—Ç—Ä–∏—è –ª–æ–º–∞–µ—Ç—Å—è)
    if (finalOuterRadius > outerSize / 2 || finalInnerRadius > innerSize / 2) {
        inputRadiusInput.classList.add('input-error');
        handleInvalidState('–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
        return;
    }

    // –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
    previewElements.forEach(el => el.style.display = 'block');

    // –õ–æ–≥–∏–∫–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è): —Ä–∞–¥–∏—É—Å < 5% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –±–ª–æ–∫–∞
    const threshold = 0.05; 
    const isInnerTooSmall = finalInnerRadius > 0 && finalInnerRadius < (innerSize * threshold);
    const isOuterTooSmall = finalOuterRadius > 0 && finalOuterRadius < (outerSize * threshold);

    if (!warningDismissed && (isInnerTooSmall || isOuterTooSmall)) {
        floatingWarning.style.display = 'flex';
    }

    const scale = (Math.min(drawingArea.clientWidth, drawingArea.clientHeight) / outerSize) * 0.85;

    // –†–∏—Å—É–µ–º –±–æ–∫—Å—ã
    outerBox.style.width = `${outerSize * scale}px`;
    outerBox.style.height = `${outerSize * scale}px`;
    outerBox.style.borderRadius = `${finalOuterRadius * scale}px`;

    innerBox.style.width = `${innerSize * scale}px`;
    innerBox.style.height = `${innerSize * scale}px`;
    innerBox.style.borderRadius = `${finalInnerRadius * scale}px`;

    // –ü—Ä—è—á–µ–º –∫—Ä—É–≥–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 0
    outerCircle.style.display = (finalOuterRadius <= 0) ? 'none' : 'block';
    innerCircle.style.display = (finalInnerRadius <= 0) ? 'none' : 'block';

    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä—É–≥–æ–≤ (—Ç–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –ø—Ä–∏–∂–∞—Ç –∫ —É–≥–ª—É —Å–≤–æ–µ–≥–æ –±–ª–æ–∫–∞)
    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —É–≥–ª–∞ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è = (—Ä–∞–∑–º–µ—Ä / 2) - —Ä–∞–¥–∏—É—Å
    const outerCenterOffset = (outerSize / 2 - finalOuterRadius) * scale;
    const innerCenterOffset = (innerSize / 2 - finalInnerRadius) * scale;
    
    outerCircle.style.width = `${finalOuterRadius * 2 * scale}px`;
    outerCircle.style.height = `${finalOuterRadius * 2 * scale}px`;
    outerCircle.style.top = `calc(50% + ${outerCenterOffset}px - ${finalOuterRadius * scale}px)`;
    outerCircle.style.left = `calc(50% + ${outerCenterOffset}px - ${finalOuterRadius * scale}px)`;

    innerCircle.style.width = `${finalInnerRadius * 2 * scale}px`;
    innerCircle.style.height = `${finalInnerRadius * 2 * scale}px`;
    innerCircle.style.top = `calc(50% + ${innerCenterOffset}px - ${finalInnerRadius * scale}px)`;
    innerCircle.style.left = `calc(50% + ${innerCenterOffset}px - ${finalInnerRadius * scale}px)`;

    resultRadiusInput.value = (calculationMode === 'calcOuter' ? finalOuterRadius : finalInnerRadius).toFixed(2);
}

function handleInvalidState(msg) {
    previewElements.forEach(el => el.style.display = 'none');
    validationMessage.style.display = 'block';
    validationMessage.textContent = msg;
}

window.addEventListener('resize', updateVisualsAndCalculation);
window.addEventListener('load', updateVisualsAndCalculation);
</script>
</body>
</html>